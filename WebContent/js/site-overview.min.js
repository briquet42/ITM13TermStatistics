function generateWordsTable(){wordTable=$("#word-list-table").DataTable({dom:"frtip",ajax:"../rest/website/"+siteID+"/words",order:[[1,"desc"]],columns:[{data:"word"},{data:"amount"}],select:"single"})}var barChart,lineChart,siteID,wordTable,startRange,endRange,$chartsSection=$("#charts");$(document).ready(function(){siteID=$("#siteID").val(),generateWordsTable(),getAllWordsForDomain(generateBarChart)}),$("#fromDate").change(function(){if("undefined"!=typeof $(this).val()){var t=$(this).val().split("-");startRange=t[2]+"."+t[1]+"."+t[0],$("#toDate").removeAttr("disabled"),$("#toDate").attr("min",$(this).val())}}),$("#toDate").change(function(){if("undefined"!=typeof $(this).val()){var t=$(this).val().split("-");endRange=t[2]+"."+t[1]+"."+t[0],getAmountsForSiteWithDateRange(startRange,endRange,generateLineChart)}});var getAllWordsForDomain=function(t){$.getJSON("/TermStatistics/rest/website/"+siteID+"/words/10",function(o){$chartsSection.removeClass("overlay"),t(o.data)})},getAmountsForSiteWithDateRange=function(t,o,r){$.getJSON("../rest/website/"+siteID+"/period/"+t+"/"+o,function(t){$chartsSection.removeClass("overlay"),r(t)})},generateBarChart=function(t){var o=[],r=[];$(t).each(function(a){o.push(t[a].word),r.push(t[a].amount)});var a={labels:o,datasets:[{label:"",fillColor:"rgba(22, 160, 133, 0.6)",strokeColor:"rgba(38, 166, 91, 0.4)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:r}]},e=$("#bar-chart").get(0).getContext("2d");barChart=new Chart(e).Bar(a)},generateLineChart=function(t){var o=[],r=[],a={legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'},e=Object.keys(t);$(e).each(function(a,e){var l=[];$(t[e]).each(function(){o.push($(this)[0].date),l.push($(this)[0].amount)}),r.push(l)});var l=["rgba(38, 166, 91, 0.8)","rgba(34, 167, 240, 0.8)","rgba(219, 10, 91, 0.8)","rgba(108, 122, 137, 0.8)","rgba(207, 0, 15, 0.8)","rgba(247, 202, 24, 0.8)","rgba(242, 38, 19, 0.8)","rgba(154, 18, 179, 0.8)","rgba(249, 105, 14, 0.8)","rgba(34, 49, 63, 0.8)"],i=eliminateDuplicates(o),n={labels:i,datasets:[{label:e[0],fillColor:"rgba(22, 160, 133, 0.0)",strokeColor:l[0],pointColor:l[0],pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:r[0]},{label:e[1],fillColor:"rgba(22, 160, 133, 0.0)",strokeColor:l[1],pointColor:l[1],pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:r[1]},{label:e[2],fillColor:"rgba(22, 160, 133, 0.0)",strokeColor:l[2],pointColor:l[2],pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:r[2]},{label:e[3],fillColor:"rgba(22, 160, 133, 0.0)",strokeColor:l[3],pointColor:l[3],pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:r[3]},{label:e[4],fillColor:"rgba(22, 160, 133, 0.0)",strokeColor:l[4],pointColor:l[4],pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:r[4]},{label:e[5],fillColor:"rgba(22, 160, 133, 0.0)",strokeColor:l[5],pointColor:l[5],pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:r[5]},{label:e[6],fillColor:"rgba(22, 160, 133, 0.0)",strokeColor:l[6],pointColor:l[6],pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:r[6]},{label:e[7],fillColor:"rgba(22, 160, 133, 0.0)",strokeColor:l[7],pointColor:l[7],pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:r[7]},{label:e[8],fillColor:"rgba(22, 160, 133, 0.0)",strokeColor:l[8],pointColor:l[8],pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:r[8]},{label:e[9],fillColor:"rgba(22, 160, 133, 0.0)",strokeColor:l[9],pointColor:l[9],pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:r[9]}]},g=$("#line-chart").get(0).getContext("2d");lineChart=new Chart(g).Line(n,a),$("#line-chart-container").append(lineChart.generateLegend())};
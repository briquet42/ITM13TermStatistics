function generateSitesTable(){siteTable=$("#site-list-table").DataTable({dom:"frtip",ajax:"../rest/word/"+wordID+"/websites",order:[[1,"desc"]],columns:[{data:"id"},{data:"adresse"},{data:"amount"}],select:"single"})}var barChart,lineChart,wordID,siteTable,startRange,endRange,$chartsSection=$("#charts");$(document).ready(function(){wordID=$("#wordID").val(),generateSitesTable(),getWebsitesForWord(generateBarChart)}),$("#fromDate").change(function(){if("undefined"!=typeof $(this).val()){var t=$(this).val().split("-");startRange=t[2]+"."+t[1]+"."+t[0],$("#toDate").removeAttr("disabled"),$("#toDate").attr("min",$(this).val())}}),$("#toDate").change(function(){if("undefined"!=typeof $(this).val()){var t=$(this).val().split("-");endRange=t[2]+"."+t[1]+"."+t[0],getAmountsForWordWithDateRange(startRange,endRange,generateLineChart)}});var getWebsitesForWord=function(t){$.getJSON("../rest/word/"+wordID+"/websites",function(e){$chartsSection.removeClass("overlay"),t(e.data)})},getAmountsForWordWithDateRange=function(t,e,a){$.getJSON("../rest/word/"+wordID+"/period/"+t+"/"+e,function(t){$chartsSection.removeClass("overlay"),a(t)})},generateBarChart=function(t){var e=[],a=[];$(t).each(function(r){e.push(t[r].adresse),a.push(t[r].amount)});var r={labels:e,datasets:[{label:"",fillColor:"rgba(22, 160, 133, 0.6)",strokeColor:"rgba(38, 166, 91, 0.4)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:a}]},o=$("#bar-chart").get(0).getContext("2d");barChart=new Chart(o).Bar(r)},generateLineChart=function(t){var e=[],a=[],r=Object.keys(t)[0],o=t[r];$(o).each(function(t){e.push(o[t].date),a.push(o[t].amount)});var n={labels:e,datasets:[{label:"",fillColor:"rgba(22, 160, 133, 0.6)",strokeColor:"rgba(38, 166, 91, 0.4)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:a}]},i=$("#line-chart").get(0).getContext("2d");lineChart=new Chart(i).Line(n)};